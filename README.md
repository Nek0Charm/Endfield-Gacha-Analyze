# 终末地卡池：UP角色+UP武器累计分布

该项目通过蒙特卡洛模拟，绘制“获得至少一个UP角色且获得至少一把UP专武”的抽数累计分布图（CDF）。

## 模型假设

- 抽数 = 角色池抽数（武器池十连消耗武库配额，但不增加抽数）。
- 武器池十连内，UP专武单抽概率为 1%（6★4% × 25%）。十连获得UP的概率为 $1-(1-0.01)^{10}$。
- 连续 7 次十连未出UP专武，下次十连必定出UP专武。
- 角色池小保底：65 抽后每抽 6★ 概率 +5%（百分点），80 抽必定出 6★。
- 角色池大保底：仅触发一次；若前 119 抽均未获得UP，则第 120 抽强制替换为UP角色且武库配额为 2000，之后不再触发强制UP。
- 十连 5★保底：若连续 9 抽都未出 5★及以上，则第 10 抽至少为 5★。
- 角色池累计 30 抽后赠送 10 连（仅一次），该 10 连不计入抽数、不占用或累计保底进度，仅使用基础概率。

> 如果你有不同的策略（例如武器池延后抽），可以改动 `simulate_cdf.py` 中的武器抽取逻辑。

## 输出

- `outputs/cdf.png`：累计分布图
- `outputs/cdf.csv`：CDF 数据（列：`total_draws,cdf`）

## 运行

1. 创建并激活虚拟环境：

```bash
python -m venv .venv
source ./.venv/bin/activate
```

2. 安装依赖：

```bash
pip install -r requirements.txt
```

3. 运行模拟：

```bash
python simulate_cdf.py --trials 20000 --seed 42
```

## 参数说明

- `--trials`：模拟次数（默认 20000）
- `--seed`：随机种子（默认 42）
- `--out-dir`：输出目录（默认 `outputs`）
